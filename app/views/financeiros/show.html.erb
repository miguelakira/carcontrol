<p id="notice"><%= notice %></p>

<% if @cars_cpf %>
<p><h5>Transações Financeiras do Cliente</h5> </p>

<fieldset>
Nome: <%= @cliente.nome %>  <br />
CPF: <%= @cliente.cpf %> <br>
<%= "Telefone: #{@cliente.telefone}" unless @cliente.telefone.empty? %> 

</fieldset>

<br /> 
<table id="mytable" cellspacing="0" summary="Detalhes do Cliente" style="width:600px">  
  <tr>
    <th style="width:180px">Carros Ativos do Cliente</th>
    <td style='border-top: 1px solid #C1DAD7;'><%= !@cars_ativos.nil? ?  "#{pluralize(@cars_ativos.count, "carro")}" : 'Nenhum carro ativo' %> </td>
  </tr>
  
  <tr>
    <th>Carros Finalizados</th>
    <td><%= !@cars_inativos.nil? ? "#{pluralize(@cars_inativos.count, "carro")}" : 'Nenhum carro finalizado' %> </td>
  </tr>

</table>
<br />

<table id="mytable" cellspacing="0" summary="Detalhes do Cliente" style="width:600px">  
  <tr>
    <th style="width:180px">Valor Total dos Fretes</th>
    <td style='border-top: 1px solid #C1DAD7;'> <%= retorna_valor_monetario(@valor_total) %> </td>
  </tr>
  
  <tr>
    <th>Valor Total Pago</th>
    <td><%= retorna_valor_monetario(@valor_pago) %>  </td>
  </tr>


</table>

<br>

<table style = "width:1000px" id="mytable" cellspacing="0" summary="Lista de Vendas" >  
  <tr>
    <!-- usar < % = sortable 'modelo' % > caso queira deixar sortable -->
    <th width = '1' class = 'none'>Nº</th>
    <th width = '30'class = 'begin'><%= sortable 'data_compra' %></th>
    <th width = '140'>Modelo e Placa</th>
    <th width = '60'>Frete</th>
    <th width = '60'>Taxa de<br/>Plataforma </th>
    <th width = '60'>Taxa de<br/>Redespacho</th>
    <th width = '60'>Desconto</th>
    <th width = '60'>Valor Pago</th>
    <th width = '60'>Saldo Devedor</th>
    <th width = '60'>Data de<br/>Pagamento</th>
  </tr>

  <% @cars_ativos.each_with_index do |car, index| %>
  <% if car.status_pagamento.value == 1  
        @row_class = 'nao-pago' 
    elsif car.status_pagamento.value == 2
        @row_class = 'pendente' 
    else
        @row_class = ''; 
    end %>

  <tr>
    <td class = "<%= @row_class %> none"> <%= index + 1 %>. </td>
    <td class = "<%= @row_class %> begin "><%= car.data_compra.strftime("%d/%m") %></td>
    <td class = "<%= @row_class %>"><%= "#{car.modelo} - #{car.placa}" %></td>
    <td class = "<%= @row_class %>"><%= retorna_valor_monetario(car.pagamento.valor_frete)%></td>
    <td class = "<%= @row_class %>"><%= retorna_valor_monetario(car.pagamento.taxa_plataforma) %></td>
    <td class = "<%= @row_class %>"><%= retorna_valor_monetario(car.pagamento.taxa_despacho) %></td>
    <td class = "<%= @row_class %>"><%= retorna_valor_monetario(car.pagamento.desconto) %></td>
    <td class = "<%= @row_class %>"><%= retorna_valor_monetario(car.pagamento.valor_pago) %></td>
    <td class = "<%= @row_class %>"><%= retorna_valor_monetario(car.pagamento.saldo_devedor) %></td>
    <td class = "<%= @row_class %>"><%= car.pagamento.data_pagamento.strftime("%d/%m/%Y") unless car.pagamento.data_pagamento.nil? %></td>
  </tr>
<% end -%>


</table>


<% end -%>



